<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chocolate Day Game</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }

        body {
            font-family: 'Arial Rounded MT Bold', 'Arial', sans-serif;
            min-height: 100vh;
            background: linear-gradient(135deg, #ffebee 0%, #fff3e0 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        /* Container */
        .container {
            text-align: center;
            max-width: 800px;
            width: 100%;
        }

        /* Header */
        .header {
            margin-bottom: 30px;
        }

        .title {
            color: #8B4513;
            font-size: 3rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 10px;
        }

        .subtitle {
            color: #A0522D;
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        .love-names {
            color: #D2691E;
            font-size: 1.5rem;
            font-family: 'Brush Script MT', cursive;
            margin-top: 10px;
        }

        /* Instructions */
        .instructions {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin: 20px auto;
            max-width: 500px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border: 2px solid #FFD700;
        }

        .instruction {
            color: #8B4513;
            margin: 8px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .instruction i {
            color: #D2691E;
        }

        /* Chocolate Bar Container */
        .chocolate-container {
            margin: 30px auto;
            position: relative;
        }

        /* White Chocolate Bar */
        .chocolate-bar {
            width: 400px;
            height: 200px;
            background: linear-gradient(to bottom, #FFF8F0 0%, #F5E6D3 20%, #F0DFC8 100%);
            border-radius: 15px;
            box-shadow: 
                0 15px 35px rgba(139, 69, 19, 0.2),
                inset 0 -8px 15px rgba(0, 0, 0, 0.1),
                inset 0 8px 15px rgba(255, 255, 255, 0.8);
            position: relative;
            border: 4px solid #D2B48C;
            animation: float 4s ease-in-out infinite;
            cursor: pointer;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(2deg); }
        }

        .chocolate-bar:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 20px 40px rgba(139, 69, 19, 0.3);
        }

        /* Chocolate Grid */
        .chocolate-grid {
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            bottom: 15px;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 8px;
            padding: 5px;
        }

        .chocolate-piece {
            background: linear-gradient(135deg, #FFF8F0 0%, #F0DFC8 100%);
            border-radius: 8px;
            border: 2px solid #E8D0B3;
            position: relative;
            transition: all 0.3s ease;
            box-shadow: inset 0 0 5px rgba(255, 255, 255, 0.5);
        }

        .chocolate-piece::before {
            content: '';
            position: absolute;
            top: 5px;
            left: 5px;
            right: 5px;
            bottom: 5px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }

        .chocolate-piece.eaten {
            opacity: 0;
            transform: scale(0);
            pointer-events: none;
        }

        /* Bite Counter */
        .bite-counter {
            position: absolute;
            top: -40px;
            right: 0;
            background: #8B4513;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.5rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            border: 3px solid #FFD700;
            z-index: 10;
        }

        /* Controls */
        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .control-btn {
            background: linear-gradient(45deg, #8B4513, #D2691E);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            border: 2px solid #FFD700;
        }

        .control-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }

        .control-btn i {
            font-size: 1.2rem;
        }

        /* Chocolate Crumbs */
        .crumbs-container {
            position: absolute;
            bottom: -50px;
            left: 0;
            width: 100%;
            height: 50px;
            pointer-events: none;
        }

        .crumb {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #F5E6D3;
            border-radius: 50%;
            opacity: 0;
            pointer-events: none;
        }

        /* Popup */
        .popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }

        .popup.active {
            opacity: 1;
            visibility: visible;
        }

        .popup-content {
            background: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border: 4px solid #8B4513;
        }

        .popup-title {
            color: #8B4513;
            font-size: 2.2rem;
            margin-bottom: 20px;
        }

        .popup-message {
            color: #654321;
            font-size: 1.2rem;
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .popup-btn {
            background: linear-gradient(45deg, #8B4513, #D2691E);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.3s;
            border: 2px solid #FFD700;
        }

        .popup-btn:hover {
            transform: scale(1.05);
        }

        /* Footer */
        .footer {
            margin-top: 30px;
            color: #8B4513;
            font-size: 0.9rem;
            text-align: center;
        }

        /* Message Counter */
        .message-counter {
            background: #FFD700;
            color: #8B4513;
            padding: 10px 20px;
            border-radius: 25px;
            margin: 20px auto;
            max-width: 300px;
            font-weight: bold;
            border: 2px solid #8B4513;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .chocolate-bar {
                width: 320px;
                height: 160px;
            }
            
            .title {
                font-size: 2.2rem;
            }
            
            .chocolate-grid {
                gap: 6px;
            }
            
            .control-btn {
                padding: 10px 20px;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .chocolate-bar {
                width: 280px;
                height: 140px;
            }
            
            .title {
                font-size: 1.8rem;
            }
            
            .love-names {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Main Container -->
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1 class="title"><i class="fas fa-candy-cane"></i> Chocolate Day <i class="fas fa-candy-cane"></i></h1>
            <p class="subtitle">Break the chocolate, share the sweetness!</p>
            <div class="love-names">For Harsh & Anabel ‚ù§Ô∏è</div>
        </div>

        <!-- Instructions -->
        <div class="instructions">
            <div class="instruction">
                <i class="fas fa-mouse-pointer"></i>
                <span>Click on the chocolate bar to take bites</span>
            </div>
            <div class="instruction">
                <i class="fas fa-cookie-bite"></i>
                <span>Each bite removes 2-3 chocolate pieces</span>
            </div>
            <div class="instruction">
                <i class="fas fa-gift"></i>
                <span>Finish the chocolate to reveal sweet messages</span>
            </div>
        </div>

        <!-- Message Counter -->
        <div class="message-counter">
            <i class="fas fa-envelope"></i> Messages: <span id="messageCount">0/5</span>
        </div>

        <!-- Chocolate Bar -->
        <div class="chocolate-container">
            <div class="bite-counter" id="biteCounter">12</div>
            <div class="chocolate-bar" id="chocolateBar">
                <div class="chocolate-grid" id="chocolateGrid">
                    <!-- 12 chocolate pieces (4x3 grid) will be generated by JavaScript -->
                </div>
            </div>
            <div class="crumbs-container" id="crumbsContainer"></div>
        </div>

        <!-- Controls -->
        <div class="controls">
            <button class="control-btn" id="resetBtn">
                <i class="fas fa-redo"></i> Reset Chocolate
            </button>
            <button class="control-btn" id="soundBtn">
                <i class="fas fa-volume-up"></i> Sound On
            </button>
            <button class="control-btn" id="autoBtn">
                <i class="fas fa-play"></i> Auto Eat
            </button>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>Made with <i class="fas fa-heart" style="color:#D2691E;"></i> for Chocolate Day Celebration</p>
            <p style="opacity: 0.7; font-size: 0.8rem; margin-top: 5px;">
                Tap the white chocolate bar to enjoy the sweetness!
            </p>
        </div>
    </div>

    <!-- Popup -->
    <div class="popup" id="popup">
        <div class="popup-content">
            <h2 class="popup-title">Sweet Message! üç´</h2>
            <p class="popup-message" id="popupMessage">Your sweet message will appear here!</p>
            <button class="popup-btn" id="closePopup">Continue Eating</button>
        </div>
    </div>

    <!-- Audio -->
    <audio id="biteSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-biting-into-crispy-food-2243.mp3" type="audio/mpeg">
    </audio>
    <audio id="crunchSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-crunchy-cereal-bite-3123.mp3" type="audio/mpeg">
    </audio>
    <audio id="messageSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3" type="audio/mpeg">
    </audio>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elements
            const chocolateBar = document.getElementById('chocolateBar');
            const chocolateGrid = document.getElementById('chocolateGrid');
            const biteCounter = document.getElementById('biteCounter');
            const crumbsContainer = document.getElementById('crumbsContainer');
            const messageCount = document.getElementById('messageCount');
            const popup = document.getElementById('popup');
            const popupMessage = document.getElementById('popupMessage');
            const closePopupBtn = document.getElementById('closePopup');
            const resetBtn = document.getElementById('resetBtn');
            const soundBtn = document.getElementById('soundBtn');
            const autoBtn = document.getElementById('autoBtn');
            
            // Audio
            const biteSound = document.getElementById('biteSound');
            const crunchSound = document.getElementById('crunchSound');
            const messageSound = document.getElementById('messageSound');
            
            // Game State
            let totalPieces = 12;
            let remainingPieces = 12;
            let messagesShown = 0;
            let soundEnabled = true;
            let autoEat = false;
            let autoEatInterval;
            
            // Sweet Messages
            const messages = [
                "Life is like chocolate: it's best when shared with someone sweet!",
                "A little chocolate a day keeps the worries away! Happy Chocolate Day!",
                "Chocolate is the answer, who cares what the question is!",
                "Forget love, I'd rather fall in chocolate! Enjoy your day!",
                "All you need is love and a little chocolate. Happy Chocolate Day!"
            ];
            
            // Initialize
            createChocolatePieces();
            updateCounters();
            
            // Create 4x3 grid of chocolate pieces
            function createChocolatePieces() {
                chocolateGrid.innerHTML = '';
                remainingPieces = 12;
                
                for (let i = 0; i < 12; i++) {
                    const piece = document.createElement('div');
                    piece.className = 'chocolate-piece';
                    piece.dataset.index = i;
                    chocolateGrid.appendChild(piece);
                }
            }
            
            // Update counters
            function updateCounters() {
                biteCounter.textContent = remainingPieces;
                messageCount.textContent = `${messagesShown}/5`;
            }
            
            // Take a bite (remove 2-3 pieces)
            function takeBite() {
                if (remainingPieces <= 0) return;
                
                // Play sound
                if (soundEnabled) {
                    crunchSound.currentTime = 0;
                    crunchSound.play().catch(() => {});
                    
                    // Play bite sound after a short delay
                    setTimeout(() => {
                        biteSound.currentTime = 0;
                        biteSound.play().catch(() => {});
                    }, 200);
                }
                
                // Determine how many pieces to remove (2-3)
                const piecesToRemove = Math.min(2 + Math.floor(Math.random() * 2), remainingPieces);
                
                // Get available pieces
                const availablePieces = Array.from(document.querySelectorAll('.chocolate-piece:not(.eaten)'));
                
                // Remove pieces with animation
                for (let i = 0; i < piecesToRemove && i < availablePieces.length; i++) {
                    const piece = availablePieces[i];
                    
                    // Animate piece removal
                    piece.classList.add('eaten');
                    
                    // Create crumbs
                    createCrumbs(piece.getBoundingClientRect());
                    
                    // Update count
                    remainingPieces--;
                }
                
                // Update counter
                updateCounters();
                
                // Check if we should show a message
                checkForMessage();
                
                // Check if all pieces are gone
                if (remainingPieces <= 0) {
                    showMessage(true);
                }
            }
            
            // Create chocolate crumbs
            function createCrumbs(pieceRect) {
                const crumbsCount = 5 + Math.floor(Math.random() * 10);
                
                for (let i = 0; i < crumbsCount; i++) {
                    const crumb = document.createElement('div');
                    crumb.className = 'crumb';
                    
                    // Position relative to chocolate piece
                    const left = pieceRect.left + Math.random() * pieceRect.width;
                    const top = pieceRect.top + Math.random() * pieceRect.height;
                    
                    crumb.style.left = `${left}px`;
                    crumb.style.top = `${top}px`;
                    
                    // Random size
                    const size = 4 + Math.random() * 8;
                    crumb.style.width = `${size}px`;
                    crumb.style.height = `${size}px`;
                    
                    // Random color
                    const brightness = 0.8 + Math.random() * 0.2;
                    crumb.style.backgroundColor = `rgb(${245 * brightness}, ${230 * brightness}, ${211 * brightness})`;
                    
                    crumbsContainer.appendChild(crumb);
                    
                    // Animate crumb falling
                    const duration = 0.5 + Math.random() * 1;
                    const angle = Math.random() * 360;
                    const distance = 50 + Math.random() * 100;
                    
                    crumb.style.transition = `all ${duration}s ease-out`;
                    crumb.style.opacity = '1';
                    
                    // Trigger animation
                    setTimeout(() => {
                        crumb.style.transform = `translate(${Math.cos(angle) * distance}px, ${Math.sin(angle) * distance}px) rotate(${angle}deg)`;
                        crumb.style.opacity = '0';
                    }, 10);
                    
                    // Remove crumb after animation
                    setTimeout(() => {
                        if (crumb.parentNode) {
                            crumb.parentNode.removeChild(crumb);
                        }
                    }, duration * 1000);
                }
            }
            
            // Check if we should show a message (every 2-3 pieces)
            function checkForMessage() {
                const piecesEaten = 12 - remainingPieces;
                
                // Show message after eating certain amounts
                const messagePoints = [2, 4, 6, 9, 12];
                
                for (let i = 0; i < messagePoints.length; i++) {
                    if (piecesEaten === messagePoints[i] && messagesShown <= i) {
                        messagesShown++;
                        showMessage(false);
                        break;
                    }
                }
            }
            
            // Show message
            function showMessage(isFinal) {
                const messageIndex = isFinal ? 4 : Math.min(messagesShown - 1, messages.length - 1);
                const message = messages[messageIndex];
                
                popupMessage.textContent = message;
                popup.classList.add('active');
                
                if (soundEnabled) {
                    messageSound.currentTime = 0;
                    messageSound.play().catch(() => {});
                }
                
                updateCounters();
            }
            
            // Event Listeners
            chocolateBar.addEventListener('click', function(e) {
                // Only take bite if clicking on chocolate bar (not on eaten pieces)
                if (e.target === chocolateBar || e.target.classList.contains('chocolate-piece')) {
                    takeBite();
                }
            });
            
            closePopupBtn.addEventListener('click', function() {
                popup.classList.remove('active');
                
                // If all pieces are gone, reset
                if (remainingPieces <= 0) {
                    setTimeout(resetGame, 500);
                }
            });
            
            resetBtn.addEventListener('click', resetGame);
            
            soundBtn.addEventListener('click', function() {
                soundEnabled = !soundEnabled;
                soundBtn.innerHTML = soundEnabled ? 
                    '<i class="fas fa-volume-up"></i> Sound On' : 
                    '<i class="fas fa-volume-mute"></i> Sound Off';
            });
            
            autoBtn.addEventListener('click', function() {
                autoEat = !autoEat;
                
                if (autoEat) {
                    autoBtn.innerHTML = '<i class="fas fa-pause"></i> Stop Auto';
                    
                    // Start auto eating
                    autoEatInterval = setInterval(function() {
                        if (remainingPieces > 0) {
                            takeBite();
                        } else {
                            clearInterval(autoEatInterval);
                            autoEat = false;
                            autoBtn.innerHTML = '<i class="fas fa-play"></i> Auto Eat';
                        }
                    }, 1000);
                } else {
                    autoBtn.innerHTML = '<i class="fas fa-play"></i> Auto Eat';
                    
                    // Stop auto eating
                    if (autoEatInterval) {
                        clearInterval(autoEatInterval);
                    }
                }
            });
            
            // Reset game function
            function resetGame() {
                createChocolatePieces();
                messagesShown = 0;
                updateCounters();
                
                if (autoEat) {
                    clearInterval(autoEatInterval);
                    autoEat = false;
                    autoBtn.innerHTML = '<i class="fas fa-play"></i> Auto Eat';
                }
            }
            
            // Add click animation
            chocolateBar.addEventListener('mousedown', function() {
                chocolateBar.style.transform = 'scale(0.95)';
            });
            
            chocolateBar.addEventListener('mouseup', function() {
                chocolateBar.style.transform = '';
            });
            
            chocolateBar.addEventListener('mouseleave', function() {
                chocolateBar.style.transform = '';
            });
        });
    </script>
</body>
</html>